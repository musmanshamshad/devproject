name: Deploy to Server

on:
  push:
    branches:
      - master # Change to your main branch name

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Set up SSH
        run: |
          mkdir -p ~/.ssh
          echo "-----BEGIN OPENSSH PRIVATE KEY-----
          b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcnNhAAAAAwEAAQAAAYEAr7iDWbAjYKlf6vhjDR4vwA5n39GHgGH49IMtWS+pF4JSGa4Ru9FeDU/1+VMQGh755GJihPZxn78Poo5lbt1Unja1Q4QgPavDf2hkKiTWDMyEY6DRkZwn0kP18kQwRB3tf3NUjNOseF+NFWzivMG8z7DiX/OGKoFHfuQsDzYvpQ5HvCgPyUWxy5XMnvNqpUeyqICZsx7LWjOFHM5L3HxCNflLnUHHn6cQg6x3ddeNfgx5RSo3g/YIUUCd3a/tvoh94sVMaBVOxM5eDN/IdDJBwHZrLsYzLi3LoEDXdxibHbm9kMRjnPeP4ghsLIDXvmG5pm5i9+VyGuCXmaZOYR8WmZvyRr9fFS5hjhMKnwfSjiujelrhjI6PQRJzFAGJrOHS2c7gsFcOOmmga+9sdW1W5DdLRJlo3GcWt/iVG69ViT84lUpz+pDV1YQYlr0apaQWqjzc2UhnqLErXF4ABXAVAGAfy
          -----END OPENSSH PRIVATE KEY-----" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan 3.7.69.51 >> ~/.ssh/known_hosts

      - name: Install Dependencies and Build
        run: |
          # Install dependencies and build your React app
          npm install
          npm run build

      - name: Deploy Build to Server
        run: |
          # Copy the build artifacts to the server using SCP
          scp -r ./build/* ubuntu@3.7.69.51:/home/ubuntu/projects
